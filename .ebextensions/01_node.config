# Elastic Beanstalk Configuration
# This file configures the Node.js environment for the Zoom Participant Randomizer
# Note: Amazon Linux 2023 uses Procfile for start command (not NodeCommand)

option_settings:
  # Environment type - Single instance (no load balancer)
  # Reason: Cost-effective for internal org tool, sessions work without Redis
  aws:elasticbeanstalk:environment:
    EnvironmentType: SingleInstance

  # Instance configuration
  # t3.micro is free tier eligible for first 12 months
  aws:autoscaling:launchconfiguration:
    InstanceType: t3.micro

  # Application environment variables
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: production
    PORT: 8080

  # Enhanced health reporting
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced

  # CloudWatch logs - stream application logs
  aws:elasticbeanstalk:cloudwatch:logs:
    StreamLogs: true
    DeleteOnTerminate: false
    RetentionInDays: 30
